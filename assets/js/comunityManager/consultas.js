let español = {
    aria: {
        sortAscending: "Activar para ordenar la columna de manera ascendente",
        sortDescending: "Activar para ordenar la columna de manera descendente",
    },
    autoFill: {
        cancel: "Cancelar",
        fill: "Rellene todas las celdas con <i>%d</i>",
        fillHorizontal: "Rellenar celdas horizontalmente",
        fillVertical: "Rellenar celdas verticalmente",
    },
    buttons: {
        collection: "Colección",
        colvis: "Visibilidad",
        colvisRestore: "Restaurar visibilidad",
        copy: "Copiar",
        copyKeys:
            "Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",
        copySuccess: {
            1: "Copiada 1 fila al portapapeles",
            _: "Copiadas %d fila al portapapeles",
        },
        copyTitle: "Copiar al portapapeles",
        csv: "CSV",
        excel: "Excel",
        pageLength: {
            "-1": "Mostrar todas las filas",
            _: "Mostrar %d filas",
        },
        pdf: "PDF",
        print: "Imprimir",
        createState: "Crear Estado",
        removeAllStates: "Borrar Todos los Estados",
        removeState: "Borrar Estado",
        renameState: "Renombrar Estado",
        savedStates: "Guardar Estado",
        stateRestore: "Restaurar Estado",
        updateState: "Actualizar Estado",
    },
    infoThousands: ",",
    loadingRecords: "Cargando...",
    paginate: {
        first: "Primero",
        last: "Último",
        next: "Siguiente",
        previous: "Anterior",
    },
    processing: "Procesando...",
    search: "Buscar:",
    searchBuilder: {
        add: "Añadir condición",
        button: {
            0: "Constructor de búsqueda",
            _: "Constructor de búsqueda (%d)",
        },
        clearAll: "Borrar todo",
        condition: "Condición",
        deleteTitle: "Eliminar regla de filtrado",
        leftTitle: "Criterios anulados",
        logicAnd: "Y",
        logicOr: "O",
        rightTitle: "Criterios de sangría",
        title: {
            0: "Constructor de búsqueda",
            _: "Constructor de búsqueda (%d)",
        },
        value: "Valor",
        conditions: {
            date: {
                after: "Después",
                before: "Antes",
                between: "Entre",
                empty: "Vacío",
                equals: "Igual a",
                not: "Diferente de",
                notBetween: "No entre",
                notEmpty: "No vacío",
            },
            number: {
                between: "Entre",
                empty: "Vacío",
                equals: "Igual a",
                gt: "Mayor a",
                gte: "Mayor o igual a",
                lt: "Menor que",
                lte: "Menor o igual a",
                not: "Diferente de",
                notBetween: "No entre",
                notEmpty: "No vacío",
            },
            string: {
                contains: "Contiene",
                empty: "Vacío",
                endsWith: "Termina con",
                equals: "Igual a",
                not: "Diferente de",
                startsWith: "Inicia con",
                notEmpty: "No vacío",
                notContains: "No Contiene",
                notEnds: "No Termina",
                notStarts: "No Comienza",
            },
            array: {
                equals: "Igual a",
                empty: "Vacío",
                contains: "Contiene",
                not: "Diferente",
                notEmpty: "No vacío",
                without: "Sin",
            },
        },
        data: "Datos",
    },
    searchPanes: {
        clearMessage: "Borrar todo",
        collapse: {
            0: "Paneles de búsqueda",
            _: "Paneles de búsqueda (%d)",
        },
        count: "{total}",
        emptyPanes: "Sin paneles de búsqueda",
        loadMessage: "Cargando paneles de búsqueda",
        title: "Filtros Activos - %d",
        countFiltered: "{shown} ({total})",
        collapseMessage: "Colapsar",
        showMessage: "Mostrar Todo",
    },
    select: {
        cells: {
            1: "1 celda seleccionada",
            _: "%d celdas seleccionadas",
        },
        columns: {
            1: "1 columna seleccionada",
            _: "%d columnas seleccionadas",
        },
    },
    thousands: ",",
    datetime: {
        previous: "Anterior",
        hours: "Horas",
        minutes: "Minutos",
        seconds: "Segundos",
        unknown: "-",
        amPm: ["am", "pm"],
        next: "Siguiente",
        months: {
            0: "Enero",
            1: "Febrero",
            10: "Noviembre",
            11: "Diciembre",
            2: "Marzo",
            3: "Abril",
            4: "Mayo",
            5: "Junio",
            6: "Julio",
            7: "Agosto",
            8: "Septiembre",
            9: "Octubre",
        },
        weekdays: [
            "Domingo",
            "Lunes",
            "Martes",
            "Miércoles",
            "Jueves",
            "Viernes",
            "Sábado",
        ],
    },
    editor: {
        close: "Cerrar",
        create: {
            button: "Nuevo",
            title: "Crear Nuevo Registro",
            submit: "Crear",
        },
        edit: {
            button: "Editar",
            title: "Editar Registro",
            submit: "Actualizar",
        },
        remove: {
            button: "Eliminar",
            title: "Eliminar Registro",
            submit: "Eliminar",
            confirm: {
                _: "¿Está seguro que desea eliminar %d filas?",
                1: "¿Está seguro que desea eliminar 1 fila?",
            },
        },
        multi: {
            title: "Múltiples Valores",
            restore: "Deshacer Cambios",
            noMulti:
                "Este registro puede ser editado individualmente, pero no como parte de un grupo.",
            info: "Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, haga click o toque aquí, de lo contrario conservarán sus valores individuales.",
        },
        error: {
            system:
                'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\"> Más información</a>).',
        },
    },
    decimal: ".",
    emptyTable: "No hay datos disponibles en la tabla",
    zeroRecords: "No se encontraron coincidencias",
    info: "Mostrando _START_ a _END_ de _TOTAL_ entradas",
    infoEmpty: "Mostrando 0 a 0 de 0 entradas",
    infoFiltered: "(Filtrado de _MAX_ total de entradas)",
    lengthMenu: "Mostrar _MENU_ entradas",
    stateRestore: {
        removeTitle: "Eliminar",
        creationModal: {
            search: "Busccar",
        },
    },
};

// ############# METODOS METODOS #############
function validarInputSoloNumeros(evt) {
    let code = (evt.which) ? evt.which : evt.keyCode;
    if (code == 8) {
        return true;
    } else if (code >= 48 && code <= 57 || code == 43 || code == 32) {
        return true;
    } else {
        return false;
    }
}
function restablecerFormGuardar() {
    $('#nombres').removeClass('border-success');
    $('#rubro').removeClass('border-success');
    $('#face').removeClass('border-success');
    $('#tipoInformacion').removeClass('border-success');
    $('#canal').removeClass('border-success');
    $('#celular').removeClass('border-success');
    $('#pauta').removeClass('border-success');
    $('#nombres').val('');
    $('#rubro').val('');
    $('#face').val('');
    $('#tipoInformacion').val('0');
    $('#canal').val('0');
    $('#celular').val('');
    $('#pauta').val('0');
    $('#nombres').addClass('border-danger');
    $('#tipoInformacion').addClass('border-danger');
    $('#canal').addClass('border-danger');
    $('#celular').addClass('border-danger');
    $('#rubro').addClass('border-warning');
    $('#face').addClass('border-warning');
    $('#pauta').addClass('border-warning');
}
function restablecerFormLlamar() {
    $('#rubroLlamar').removeClass('border-success');
    $('#tipoInformacionLlamar').removeClass('border-success');
    $('#medioEnvioInfoLlamar').removeClass('border-success');
    $('#tipoDemo').removeClass('border-success');
    $('#correoEnvio').removeClass('border-success');
    $('#fechaDemoLlamar').removeClass('border-success');
    $('#observacionEnvioInfo').removeClass('border-success');
    $('#mensajePauta').removeClass('border-success');
    $('#pautaLlamar').removeClass('border-success');

    $('#rubroLlamar').addClass('border-danger');
    $('#tipoInformacionLlamar').addClass('border-danger');
    $('#medioEnvioInfoLlamar').addClass('border-danger');
    $('#observacionEnvioInfo').addClass('border-danger');
    $('#mensajePauta').addClass('border-danger');
    $('#tipoDemo').addClass('border-warning');
    $('#correoEnvio').addClass('border-warning');
    $('#fechaDemoLlamar').addClass('border-warning');
    $('#pautaLlamar').addClass('border-warning');

    $('#correoEnvio').prop('disabled', true);
    $('#fechaDemoLlamar').prop('disabled', true);
    $('#btnRechazarSolic').prop('disabled', true);


    $('#rubroLlamar').val('');
    $('#medioEnvioInfoLlamar').val('0');
    $('#tipoInformacionLlamar').val('0');
    $('#tipoInformacionLlamar').val('0');
    $('#correoEnvio').val('');
    $('#tipoDemo').val('0');
    $('#celularLlamar').val('');
    $('#fechaDemoLlamar').val('');
    $('#observacionEnvioInfo').val('');
    $('#mensajePauta').val('');
}

// ----------- VALIDAR CAMPOS DE FORMULARIO AGREGAR SOLIC DE INFORMACION --------------
$('#canal').change(function () {
    if ($('#canal').val() != '0') {
        $('#canal').removeClass('border-danger');
        $('#canal').addClass('border-success');
    } else {
        $('#canal').removeClass('border-success');
        $('#canal').addClass('border-danger');

    }
    if ($('#canal').val() == 'facebook') {
        $('#face').prop("disabled", false)
        icono = '<i class="fab fa-facebook-f"></i>'
        $('#iconoRedSocial').css('color', '#1194f5')
        $('#face').attr("placeholder", "Link de Facebook");
    } else if ($('#canal').val() == 'instagram') {
        $('#face').prop("disabled", false)
        icono = '<i class="fab fa-instagram"></i>'
        $('#iconoRedSocial').css('color', '#d7224c')
        $('#face').attr("placeholder", "Link de Instagram");
    } else if ($('#canal').val() == 'whatsapp') {
        $('#face').prop("disabled", true)
        icono = '<i class="fab fa-whatsapp"></i>'
        $('#iconoRedSocial').css('color', '#00a884')
        $('#face').attr("placeholder", "Link de Whatsapp - no corresponde");
    } else if ($('#canal').val() == 'tiktok') {
        $('#face').prop("disabled", false)
        icono = '<i class="fab fa-tiktok"></i>'
        $('#iconoRedSocial').css('color', 'black')
        $('#face').attr("placeholder", "Link de Tik Tok");
    } else if ($('#canal').val() == 'youtube') {
        $('#face').prop("disabled", false)
        icono = '<i class="fab fa-youtube"></i>'
        $('#iconoRedSocial').css('color', 'red')
        $('#face').attr("placeholder", "Link de YouTube");
    }
    $('#iconoRedSocial').html(icono);
});
$('#tipoInformacion').change(function () {
    if ($('#tipoInformacion').val() != '0') {
        $('#tipoInformacion').removeClass('border-danger');
        $('#tipoInformacion').addClass('border-success');
    } else {
        $('#tipoInformacion').removeClass('border-success');
        $('#tipoInformacion').addClass('border-danger');
    }
})
$('#nombres').keyup(function () {
    if ($('#nombres').val().length >= 3) {
        $('#nombres').removeClass('border-danger');
        $('#nombres').addClass('border-success');
    } else {
        $('#nombres').removeClass('border-success');
        $('#nombres').addClass('border-danger');
    }
})
$('#celular').keyup(function () {
    if ($('#celular').val().length >= 3) {
        $('#celular').removeClass('border-danger');
        $('#celular').addClass('border-success');
    } else {
        $('#celular').removeClass('border-success');
        $('#celular').addClass('border-danger');
    }
})
$('#pauta').change(function () {
    if ($('#pauta').val() != '0') {
        $('#pauta').removeClass('border-warning');
        $('#pauta').addClass('border-success');
    } else {
        $('#pauta').removeClass('border-success');
        $('#pauta').addClass('border-warning');
    }
})
$('#rubro').keyup(function () {
    if ($('#rubro').val().length >= 3) {
        $('#rubro').removeClass('border-warning');
        $('#rubro').addClass('border-success');
    } else {
        $('#rubro').removeClass('border-success');
        $('#rubro').addClass('border-warning');
    }
})
$('#face').keyup(function () {
    if ($('#face').val().length >= 15) {
        $('#face').removeClass('border-warning');
        $('#face').addClass('border-success');
    } else {
        $('#face').removeClass('border-success');
        $('#face').addClass('border-warning');
    }
})
setInterval(() => {
    let canal = $("#canal").hasClass("border-success")
    let tipoInformacion = $("#tipoInformacion").hasClass("border-success")
    let nombres = $("#nombres").hasClass("border-success")
    let celular = $("#celular").hasClass("border-success")
    if (canal && tipoInformacion && nombres && celular) {
        $('#btnGuardarSoliInfo').prop('disabled', false);
    } else {
        $('#btnGuardarSoliInfo').prop('disabled', true);
    }
}, 300);
// ----------- FIN VALIDAR CAMPOS DE FORMULARIO AGREGAR SOLIC DE INFORMACION -----------

// ----------- VALIDAR CAMPOS DE FORMULARIO LLAMAR SOLIC DE INFORMACION --------------
$('#observacionEnvioInfo').keyup(function () {
    if ($('#observacionEnvioInfo').val().length >= 10) {
        $('#observacionEnvioInfo').removeClass('border-danger');
        $('#observacionEnvioInfo').addClass('border-success');
    } else {
        $('#observacionEnvioInfo').removeClass('border-success');
        $('#observacionEnvioInfo').addClass('border-danger');
    }
});
$('#mensajePauta').keyup(function () {
    if ($('#mensajePauta').val().length >= 10) {
        $('#mensajePauta').removeClass('border-danger');
        $('#mensajePauta').addClass('border-success');
    } else {
        $('#mensajePauta').removeClass('border-success');
        $('#mensajePauta').addClass('border-danger');
    }
});
$('#rubroLlamar').keyup(function () {
    if ($('#rubroLlamar').val().length >= 4) {
        $('#rubroLlamar').removeClass('border-danger');
        $('#rubroLlamar').addClass('border-success');
    } else {
        $('#rubroLlamar').removeClass('border-success');
        $('#rubroLlamar').addClass('border-danger');
    }
});
$('#tipoInformacionLlamar').change(function () {
    if ($('#tipoInformacionLlamar').val() != '0') {
        $('#tipoInformacionLlamar').removeClass('border-danger');
        $('#tipoInformacionLlamar').addClass('border-success');
    } else {
        $('#tipoInformacionLlamar').removeClass('border-success');
        $('#tipoInformacionLlamar').addClass('border-danger');
    }
})
$('#medioEnvioInfoLlamar').change(function () {
    if ($('#medioEnvioInfoLlamar').val() == 'wsp') {
        $('#medioEnvioInfoLlamar').removeClass('border-danger');
        $('#medioEnvioInfoLlamar').addClass('border-success');
        $('#correoEnvio').removeClass('border-warning');
        $('#correoEnvio').removeClass('border-danger');
        $('#correoEnvio').addClass('border-warning');
        $('#correoEnvio').prop('disabled', true);
        $('#correoEnvio').val('')
    } else if ($('#medioEnvioInfoLlamar').val() == 'email') {
        $('#medioEnvioInfoLlamar').removeClass('border-danger');
        $('#correoEnvio').removeClass('border-warning');
        $('#correoEnvio').prop('disabled', false);
        $('#medioEnvioInfoLlamar').addClass('border-success');
        $('#correoEnvio').addClass('border-danger');
    } else {
        $('#medioEnvioInfoLlamar').removeClass('border-success');
        $('#medioEnvioInfoLlamar').addClass('border-danger');
        $('#correoEnvio').removeClass('border-warning');
        $('#correoEnvio').removeClass('border-danger');
        $('#correoEnvio').addClass('border-warning');
        $('#correoEnvio').prop('disabled', true);
        $('#correoEnvio').val('')
    }
})
$('#correoEnvio').keyup(function () {
    if ($('#correoEnvio').val().length >= 10) {
        $('#correoEnvio').removeClass('border-danger');
        $('#correoEnvio').addClass('border-success');
    } else {
        $('#correoEnvio').removeClass('border-success');
        $('#correoEnvio').addClass('border-danger');
    }
});
$('#tipoDemo').change(function () {
    if ($('#tipoDemo').val() == 'remoto' || $('#tipoDemo').val() == 'presencial') {
        $('#tipoDemo').removeClass('border-warning');
        $('#tipoDemo').addClass('border-success');
        $('#fechaDemoLlamar').removeClass('border-warning');
        $('#fechaDemoLlamar').removeClass('border-warning');
        $('#fechaDemoLlamar').addClass('border-danger');
        $('#fechaDemoLlamar').prop('disabled', false);
    } else {
        $('#tipoDemo').removeClass('border-success');
        $('#tipoDemo').addClass('border-warning');
        $('#fechaDemoLlamar').removeClass('border-warning');
        $('#fechaDemoLlamar').removeClass('border-danger');
        $('#fechaDemoLlamar').addClass('border-warning');
        $('#fechaDemoLlamar').prop('disabled', true);
        $('#fechaDemoLlamar').val('')
    }
})
$('#fechaDemoLlamar').change(function () {
    if ($('#fechaDemoLlamar').val() != '') {
        $('#fechaDemoLlamar').removeClass('border-danger')
        $('#fechaDemoLlamar').addClass('border-success')
    } else {
        $('#fechaDemoLlamar').removeClass('border-success')
        $('#fechaDemoLlamar').addClass('border-danger')
    }
})
$('#pautaLlamar').change(function () {
    if ($('#pautaLlamar').val() != '0') {
        $('#pautaLlamar').removeClass('border-warning')
        $('#pautaLlamar').addClass('border-success')
    } else {
        $('#pautaLlamar').removeClass('border-success')
        $('#pautaLlamar').addClass('border-warning')
    }
})
setInterval(() => {
    let rubro = $("#rubroLlamar").hasClass("border-success")
    let solicita = $("#tipoInformacionLlamar").hasClass("border-success")
    let medio = $("#medioEnvioInfoLlamar").hasClass("border-success")
    let observacion = $("#observacionEnvioInfo").hasClass("border-success")
    let mensaje = $("#mensajePauta").hasClass("border-success")
    if (rubro && solicita && medio && observacion && mensaje) {
        $('#btnEditarSoliInfoLlamada').prop('disabled', false);
        if ($("#medioEnvioInfoLlamar").val() == 'email') {
            if ($("#correoEnvio").hasClass("border-success")) {
                $('#btnEditarSoliInfoLlamada').prop('disabled', false);
            } else {
                $('#btnEditarSoliInfoLlamada').prop('disabled', true);
            }
        }
        if ($("#tipoDemo").val() != '0') {
            if ($("#fechaDemoLlamar").hasClass("border-success")) {
                $('#btnEditarSoliInfoLlamada').prop('disabled', false);
            } else {
                $('#btnEditarSoliInfoLlamada').prop('disabled', true);
            }
        }
        if ($("#medioEnvioInfoLlamar").val() == 'email' && $("#tipoDemo").val() != '0') {
            if ($("#fechaDemoLlamar").hasClass("border-success") && $("#correoEnvio").hasClass("border-success")) {
                $('#btnEditarSoliInfoLlamada').prop('disabled', false);
            } else {
                $('#btnEditarSoliInfoLlamada').prop('disabled', true);
            }

        }
    } else {
        $('#btnEditarSoliInfoLlamada').prop('disabled', true);
    }
}, 300);
// ----------- FIN VALIDAR CAMPOS DE FORMULARIO LLAMAR SOLIC DE INFORMACION -----------

$('#btnAbrirmodalGuardarSolicInfo').click(function () {
    window.$.ajax({
        type: "GET",
        url: "PautasController.php?method=listarPautasAct",
        success: function (response) {
            let data = JSON.parse(response);
            contenido = "<option value='0'>Seleccione Pauta</option>";
            data.forEach((pauta) => {
                contenido += `<option value=${pauta.id}>${pauta.nombre}</option>`;
            });
            $('#pauta').html(contenido);
        },
    });
})
$('#btnCerrarModalGuardarSolicInfo').click(function () {
    restablecerFormGuardar();
})
$('#btnCerrarModalLlamarCliente').click(function () {
    restablecerFormLlamar()
})

// ######## LLENAR DATA TABLE ############
$(document).ready(function () {
    let dataTable = $("#solicInfoDataTable").DataTable({
        ajax: {
            url: "../controllers/ConsultasCMController.php?method=listarSolicInfo",
            method: "GET",
        },
        columns: [
            { data: "indice" },
            { data: "cliente" },
            {
                data: "facebook",
                render: function (data, type, row) {
                    if (row.facebook != '') {
                        return `<a href="${row.facebook}" class="btn-primary active" aria-current="page" target=”_blank”><span class="badge bg-success fs-6"><i class="fas fa-globe"></i></span></a>
            `
                    } else {
                        return `<span class="badge bg-dark text-white fs-6"><i class="fas fa-globe"></span>`
                    }
                }
            },
            { data: "celular" },
            { data: "rubro" },
            {
                data: "tipoInformacion",
                render: function (data, type, row) {
                    if (row.tipoInformacion == 'equi') {
                        return `<span class="badge bg-info text-dark">EQUIPOS</i></span>`
                    }
                    if (row.tipoInformacion == 'gen') {
                        return `<span class="badge bg-info text-dark">GENERAL</i></span>`
                    }
                    if (row.tipoInformacion == 'sist') {
                        return `<span class="badge bg-info text-dark">SISTEMAS</i></span>`
                    }
                    if (row.tipoInformacion == 'noEspecifica') {
                        return `<span class="badge bg-danger">No especifica</i></span>`
                    }
                }
            },
            {
                defaultContent: `
        <button type="button" id="btnAbriModalLlamarCliente" class="llamar btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#modalLLamarCliente"><i class="fas fa-phone-alt"></i></button>
        `,
            },
        ],
        language: español,
    });
    // Proceso de guardar solicitud de informacion
    $("#btnGuardarSoliInfo").click(function (e) {
        let formData = new FormData();
        formData.append("nombres", ($('#nombres').val()).toUpperCase());
        formData.append("rubro", ($('#rubro').val()).toUpperCase());
        formData.append("celular", $('#celular').val());
        formData.append("canal", $('#canal').val());
        formData.append("face", $('#face').val());
        formData.append("tipoInformacion", $('#tipoInformacion').val());
        formData.append("pauta", $('#pauta').val());
        window.$.ajax({
            type: "post",
            url: "ConsultasCMController.php?method=guardarSolicInfo",
            data: formData,
            cache: false,
            processData: false,
            contentType: false,
            beforeSend: function () {
                Swal.fire({
                    allowOutsideClick: false,
                    title: 'Cargando',
                    timerProgressBar: true,
                    didOpen: () => {
                        Swal.showLoading()
                        const b = Swal.getHtmlContainer().querySelector('b')
                        timerInterval = setInterval(() => {
                        }, 300)
                    }
                })
            },
            success: function (response) {
                Swal.close()
                dataTable.ajax.reload();
                let data = JSON.parse(response);
                if (data.estado == "ok") {
                    $("#modalGuardarSoliInformacion").modal("hide");
                    restablecerFormGuardar();
                    Swal.fire({
                        text: data.mensaje,
                        icon: 'success',
                    })
                } else {
                    Swal.fire({
                        text: data.mensaje,
                        icon: 'error',
                    })
                    setTimeout(() => {
                        Swal.close()
                    }, 1200);
                }
            },
        });
    });
    // Modal llamar con datos correspondientes
    $('#solicInfoDataTable tbody').on("click", ".llamar", function () {
        let data = dataTable.row($(this).parents()).data();
        window.$.ajax({
            type: "GET",
            url: "PautasController.php?method=listarPautasAct",
            success: function (response) {
                let data2 = JSON.parse(response);
                contenido = "<option value='0'>Seleccione Pauta</option>";
                data2.forEach((pauta) => {
                    contenido += `<option value=${pauta.id}>${pauta.nombre}</option>`;
                });
                $('#pautaLlamar').html(contenido);
                if (data.pauta != '') {
                    $('#pautaLlamar').val(data.pauta)
                    $('#pautaLlamar').removeClass('border-warning')
                    $('#pautaLlamar').addClass('border-success')
                } else {
                    $('#pautaLlamar').val('0');
                    $('#pautaLlamar').removeClass('border-success')
                    $('#pautaLlamar').addClass('border-warning')
                }
            },
        });
        setInterval(() => {
            let observacion = $("#observacionEnvioInfo").hasClass("border-success")
            if (observacion) {
                $('#btnRechazarSolic').prop('disabled', false);
            } else {
                $('#btnRechazarSolic').prop('disabled', true);
            }
        }, 300);
        $('#idSolic').val(data.idSolicitud)
        $('#nombresLlamar').val(data.cliente)
        $('#celularLlamar').val(data.celular)
        if ((data.rubro) != '') {
            $('#rubroLlamar').prop('disabled', true)
            $('#rubroLlamar').val(data.rubro)
            $('#rubroLlamar').removeClass('border-danger')
            $('#rubroLlamar').addClass('border-success')
        } else {
            $('#rubroLlamar').prop('disabled', false)
            $('#rubroLlamar').val('')
            $('#rubroLlamar').removeClass('border-success')
            $('#rubroLlamar').addClass('border-danger')
        }
        if (data.tipoInformacion != 'noEspecifica') {
            $('#tipoInformacionLlamar').val(data.tipoInformacion).select()
            $('#tipoInformacionLlamar').prop('disabled', true)
            $('#tipoInformacionLlamar').removeClass('border-danger')
            $('#tipoInformacionLlamar').addClass('border-success')
        } else {
            $('#tipoInformacionLlamar').val(data.tipoInformacion).select()
            $('#tipoInformacionLlamar').prop('disabled', false)
            $('#tipoInformacionLlamar').removeClass('border-success')
            $('#tipoInformacionLlamar').addClass('border-danger')
        }
        
    });
    // Proceso despues de llamar
    $('#btnEditarSoliInfoLlamada').click(function (e) {
        let formData = new FormData;
        formData.append("idSolic", $('#idSolic').val());
        formData.append("rubro", $('#rubroLlamar').val().toUpperCase());
        formData.append("tipo_info", $('#tipoInformacionLlamar').val());
        formData.append("medioEnvioInfoLlamar", $('#medioEnvioInfoLlamar').val());
        formData.append("correoEnvio", $('#correoEnvio').val());
        formData.append("tipoDemo", $('#tipoDemo').val());
        formData.append("fechaDemoLlamar", $('#fechaDemoLlamar').val());
        formData.append("pauta", $('#pautaLlamar').val());
        formData.append("msj_pauta", $('#mensajePauta').val().toUpperCase());
        formData.append("observacionEnvioInfo", $('#observacionEnvioInfo').val());

        window.$.ajax({
            type: "post",
            url: "ConsultasCMController.php?method=editarSolicInfoLlamar",
            data: formData,
            cache: false,
            processData: false,
            contentType: false,
            beforeSend: function () {
                Swal.fire({
                    allowOutsideClick: false,
                    title: 'Cargando',
                    timerProgressBar: true,
                    didOpen: () => {
                        Swal.showLoading()
                        const b = Swal.getHtmlContainer().querySelector('b')
                        timerInterval = setInterval(() => {
                        }, 300)
                    }
                })
            },
            success: function (response) {
                Swal.close()
                dataTable.ajax.reload();
                let data = JSON.parse(response);
                if (data.estado == 'ok') {
                    $("#modalLLamarCliente").modal("hide");
                    restablecerFormLlamar();
                    Swal.fire({
                        text: data.mensaje,
                        icon: 'success',
                    })
                } else {
                    $("#modalLLamarCliente").modal("hide");
                    Swal.fire({
                        text: data.mensaje,
                        icon: 'error',
                    })
                    setTimeout(() => {
                        Swal.close()
                    }, 1200);
                }
            },
        });
    });
    // Proceso rechazo de llamada
    $('#btnRechazarSolic').click(function (e) {
        let formData = new FormData;
        formData.append("idSolic", $('#idSolic').val());
        formData.append("observacion", $('#observacionEnvioInfo').val());
        window.$.ajax({
            type: "post",
            url: "ConsultasCMController.php?method=rechazarSolic",
            data: formData,
            cache: false,
            processData: false,
            contentType: false,
            beforeSend: function () {
                Swal.fire({
                    allowOutsideClick: false,
                    title: 'Cargando',
                    timerProgressBar: true,
                    didOpen: () => {
                        Swal.showLoading()
                        const b = Swal.getHtmlContainer().querySelector('b')
                        timerInterval = setInterval(() => {
                        }, 300)
                    }
                })
            },
            success: function (response) {
                Swal.close()
                dataTable.ajax.reload();
                let data = JSON.parse(response);
                if (data.estado == 'ok') {
                    $('#observacionEnvioInfo').removeClass('border-success');
                    $('#observacionEnvioInfo').addClass('border-danger');
                    $('#observacionEnvioInfo').val('');
                    $("#modalLLamarCliente").modal("hide");
                    Swal.fire({
                        text: data.mensaje,
                        icon: 'success',
                    })
                } else {
                    Swal.fire({
                        text: data.mensaje,
                        icon: 'error',
                    })
                }
            },
        });
    });
});
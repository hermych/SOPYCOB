let español = {
  aria: {
    sortAscending: "Activar para ordenar la columna de manera ascendente",
    sortDescending: "Activar para ordenar la columna de manera descendente",
  },
  autoFill: {
    cancel: "Cancelar",
    fill: "Rellene todas las celdas con <i>%d</i>",
    fillHorizontal: "Rellenar celdas horizontalmente",
    fillVertical: "Rellenar celdas verticalmente",
  },
  buttons: {
    collection: "Colección",
    colvis: "Visibilidad",
    colvisRestore: "Restaurar visibilidad",
    copy: "Copiar",
    copyKeys:
      "Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",
    copySuccess: {
      1: "Copiada 1 fila al portapapeles",
      _: "Copiadas %d fila al portapapeles",
    },
    copyTitle: "Copiar al portapapeles",
    csv: "CSV",
    excel: "Excel",
    pageLength: {
      "-1": "Mostrar todas las filas",
      _: "Mostrar %d filas",
    },
    pdf: "PDF",
    print: "Imprimir",
    createState: "Crear Estado",
    removeAllStates: "Borrar Todos los Estados",
    removeState: "Borrar Estado",
    renameState: "Renombrar Estado",
    savedStates: "Guardar Estado",
    stateRestore: "Restaurar Estado",
    updateState: "Actualizar Estado",
  },
  infoThousands: ",",
  loadingRecords: "Cargando...",
  paginate: {
    first: "Primero",
    last: "Último",
    next: "Siguiente",
    previous: "Anterior",
  },
  processing: "Procesando...",
  search: "Buscar:",
  searchBuilder: {
    add: "Añadir condición",
    button: {
      0: "Constructor de búsqueda",
      _: "Constructor de búsqueda (%d)",
    },
    clearAll: "Borrar todo",
    condition: "Condición",
    deleteTitle: "Eliminar regla de filtrado",
    leftTitle: "Criterios anulados",
    logicAnd: "Y",
    logicOr: "O",
    rightTitle: "Criterios de sangría",
    title: {
      0: "Constructor de búsqueda",
      _: "Constructor de búsqueda (%d)",
    },
    value: "Valor",
    conditions: {
      date: {
        after: "Después",
        before: "Antes",
        between: "Entre",
        empty: "Vacío",
        equals: "Igual a",
        not: "Diferente de",
        notBetween: "No entre",
        notEmpty: "No vacío",
      },
      number: {
        between: "Entre",
        empty: "Vacío",
        equals: "Igual a",
        gt: "Mayor a",
        gte: "Mayor o igual a",
        lt: "Menor que",
        lte: "Menor o igual a",
        not: "Diferente de",
        notBetween: "No entre",
        notEmpty: "No vacío",
      },
      string: {
        contains: "Contiene",
        empty: "Vacío",
        endsWith: "Termina con",
        equals: "Igual a",
        not: "Diferente de",
        startsWith: "Inicia con",
        notEmpty: "No vacío",
        notContains: "No Contiene",
        notEnds: "No Termina",
        notStarts: "No Comienza",
      },
      array: {
        equals: "Igual a",
        empty: "Vacío",
        contains: "Contiene",
        not: "Diferente",
        notEmpty: "No vacío",
        without: "Sin",
      },
    },
    data: "Datos",
  },
  searchPanes: {
    clearMessage: "Borrar todo",
    collapse: {
      0: "Paneles de búsqueda",
      _: "Paneles de búsqueda (%d)",
    },
    count: "{total}",
    emptyPanes: "Sin paneles de búsqueda",
    loadMessage: "Cargando paneles de búsqueda",
    title: "Filtros Activos - %d",
    countFiltered: "{shown} ({total})",
    collapseMessage: "Colapsar",
    showMessage: "Mostrar Todo",
  },
  select: {
    cells: {
      1: "1 celda seleccionada",
      _: "%d celdas seleccionadas",
    },
    columns: {
      1: "1 columna seleccionada",
      _: "%d columnas seleccionadas",
    },
  },
  thousands: ",",
  datetime: {
    previous: "Anterior",
    hours: "Horas",
    minutes: "Minutos",
    seconds: "Segundos",
    unknown: "-",
    amPm: ["am", "pm"],
    next: "Siguiente",
    months: {
      0: "Enero",
      1: "Febrero",
      10: "Noviembre",
      11: "Diciembre",
      2: "Marzo",
      3: "Abril",
      4: "Mayo",
      5: "Junio",
      6: "Julio",
      7: "Agosto",
      8: "Septiembre",
      9: "Octubre",
    },
    weekdays: [
      "Domingo",
      "Lunes",
      "Martes",
      "Miércoles",
      "Jueves",
      "Viernes",
      "Sábado",
    ],
  },
  editor: {
    close: "Cerrar",
    create: {
      button: "Nuevo",
      title: "Crear Nuevo Registro",
      submit: "Crear",
    },
    edit: {
      button: "Editar",
      title: "Editar Registro",
      submit: "Actualizar",
    },
    remove: {
      button: "Eliminar",
      title: "Eliminar Registro",
      submit: "Eliminar",
      confirm: {
        _: "¿Está seguro que desea eliminar %d filas?",
        1: "¿Está seguro que desea eliminar 1 fila?",
      },
    },
    multi: {
      title: "Múltiples Valores",
      restore: "Deshacer Cambios",
      noMulti:
        "Este registro puede ser editado individualmente, pero no como parte de un grupo.",
      info: "Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, haga click o toque aquí, de lo contrario conservarán sus valores individuales.",
    },
    error: {
      system:
        'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\"> Más información</a>).',
    },
  },
  decimal: ".",
  emptyTable: "No hay datos disponibles en la tabla",
  zeroRecords: "No se encontraron coincidencias",
  info: "Mostrando _START_ a _END_ de _TOTAL_ entradas",
  infoEmpty: "Mostrando 0 a 0 de 0 entradas",
  infoFiltered: "(Filtrado de _MAX_ total de entradas)",
  lengthMenu: "Mostrar _MENU_ entradas",
  stateRestore: {
    removeTitle: "Eliminar",
    creationModal: {
      search: "Busccar",
    },
  },
};
/** -------------> FUNCIONES FUNCIONES FUNCIONES <---------------- */
function editarPrograInsta(formData, dataTable) {
  window.$.ajax({
    type: "post",
    url: "InstalacionController.php?method=editarPrograInsta",
    data: formData,
    cache: false,
    processData: false,
    contentType: false,
    beforeSend: function () {
      Swal.fire({
        // allowOutsideClick: false,
        title: 'Cargando',
        timerProgressBar: true,
        didOpen: () => {
          Swal.showLoading()
          const b = Swal.getHtmlContainer().querySelector('b')
          timerInterval = setInterval(() => {
          }, 300)
        }
      })
    },
    success: function (response) {
      Swal.close()
      let data = JSON.parse(response);
      if (data.estado == "ok") {
        dataTable.ajax.reload();
        $('#modalInstalacion').hide();
        $('.modal-backdrop').remove();
        Swal.fire({
          text: data.mensaje,
          icon: 'success',
        })
        setTimeout(() => {
          Swal.close()
        }, 1500);
      } else {
        Swal.fire({
          text: data.mensaje,
          icon: 'error',
        })
        setTimeout(() => {
          Swal.close()
        }, 1500);
      }
    },
  });
}
setInterval(() => {
  if ($('#tipo_sistema').val() == '1') {
    if ($("#titulo").hasClass("border-danger") || $("#dominioPos").hasClass("border-danger") || $("#cliente").hasClass("border-danger") || $("#dni").hasClass("border-danger") || $("#razonSocial").hasClass("border-danger") || $("#name_comercial").hasClass("border-danger") || $("#ruc").hasClass("border-danger") || $("#tipo_negocio").hasClass("border-danger") || $("#direc_fiscal").hasClass("border-danger") || $("#serie_compro").hasClass("border-danger") || $("#especificacion").hasClass("border-danger") || $("#observacion").hasClass("border-danger") || $("#fecha_instalacion").hasClass("border-danger")) {
      $('#btnEditar').prop('disabled', true)
    } else {
      $('#btnEditar').prop('disabled', false)
    }
  } else if ($('#tipo_sistema').val() == '2') {
    if ($("#titulo").hasClass("border-danger") || $("#dominioFactura").hasClass("border-danger") || $("#cliente").hasClass("border-danger") || $("#dni").hasClass("border-danger") || $("#razonSocial").hasClass("border-danger") || $("#name_comercial").hasClass("border-danger") || $("#ruc").hasClass("border-danger") || $("#tipo_negocio").hasClass("border-danger") || $("#direc_fiscal").hasClass("border-danger") || $("#serie_compro").hasClass("border-danger") || $("#especificacion").hasClass("border-danger") || $("#observacion").hasClass("border-danger") || $("#usuario").hasClass("border-danger") || $("#clave_sol").hasClass("border-danger") || $("#fecha_instalacion").hasClass("border-danger")) {
      $('#btnEditar').prop('disabled', true)
    } else {
      $('#btnEditar').prop('disabled', false)
    }
  } else if ($('#tipo_sistema').val() == '3') {
    if ($("#titulo").hasClass("border-danger") || $("#cliente").hasClass("border-danger") || $("#dni").hasClass("border-danger") || $("#razonSocial").hasClass("border-danger") || $("#name_comercial").hasClass("border-danger") || $("#ruc").hasClass("border-danger") || $("#tipo_negocio").hasClass("border-danger") || $("#direc_fiscal").hasClass("border-danger") || $("#serie_compro").hasClass("border-danger") || $("#especificacion").hasClass("border-danger") || $("#observacion").hasClass("border-danger") || $("#persona_contacto").hasClass("border-danger") || $("#cel_contacto").hasClass("border-danger") || $("#equipo_principal").hasClass("border-danger") || $("#equipo_cocina").hasClass("border-danger") || $("#equipo_bar").hasClass("border-danger") || $("#total_impresoras").hasClass("border-danger") || $("#fecha_instalacion").hasClass("border-danger")) {
      $('#btnEditar').prop('disabled', true)
    } else {
      $('#btnEditar').prop('disabled', false)
    }
  } else if ($('#tipo_sistema').val() == '4') {
    if ($("#titulo").hasClass("border-danger") || $("#dominioRestobar").hasClass("border-danger") || $("#cliente").hasClass("border-danger") || $("#dni").hasClass("border-danger") || $("#razonSocial").hasClass("border-danger") || $("#name_comercial").hasClass("border-danger") || $("#ruc").hasClass("border-danger") || $("#tipo_negocio").hasClass("border-danger") || $("#direc_fiscal").hasClass("border-danger") || $("#serie_compro").hasClass("border-danger") || $("#especificacion").hasClass("border-danger") || $("#observacion").hasClass("border-danger") || $("#fecha_instalacion").hasClass("border-danger")) {
      $('#btnEditar').prop('disabled', true)
    } else {
      $('#btnEditar').prop('disabled', false)
    }
  } else if ($('#tipo_sistema').val() == '5') {
    if ($("#titulo").hasClass("border-danger") || $("#dominioPos").hasClass("border-danger") || $("#dominioFactura").hasClass("border-danger") || $("#cliente").hasClass("border-danger") || $("#dni").hasClass("border-danger") || $("#razonSocial").hasClass("border-danger") || $("#name_comercial").hasClass("border-danger") || $("#ruc").hasClass("border-danger") || $("#tipo_negocio").hasClass("border-danger") || $("#direc_fiscal").hasClass("border-danger") || $("#serie_compro").hasClass("border-danger") || $("#especificacion").hasClass("border-danger") || $("#observacion").hasClass("border-danger") || $("#usuario").hasClass("border-danger") || $("#clave_sol").hasClass("border-danger") || $("#fecha_instalacion").hasClass("border-danger")) {
      $('#btnEditar').prop('disabled', true)
    } else {
      $('#btnEditar').prop('disabled', false)
    }
  } else if ($('#tipo_sistema').val() == '6') {
    if ($("#titulo").hasClass("border-danger") || $("#dominioFactura").hasClass("border-danger") || $("#cliente").hasClass("border-danger") || $("#dni").hasClass("border-danger") || $("#razonSocial").hasClass("border-danger") || $("#name_comercial").hasClass("border-danger") || $("#ruc").hasClass("border-danger") || $("#tipo_negocio").hasClass("border-danger") || $("#direc_fiscal").hasClass("border-danger") || $("#serie_compro").hasClass("border-danger") || $("#especificacion").hasClass("border-danger") || $("#observacion").hasClass("border-danger") || $("#persona_contacto").hasClass("border-danger") || $("#cel_contacto").hasClass("border-danger") || $("#equipo_principal").hasClass("border-danger") || $("#equipo_cocina").hasClass("border-danger") || $("#equipo_bar").hasClass("border-danger") || $("#total_impresoras").hasClass("border-danger") || $("#usuario").hasClass("border-danger") || $("#clave_sol").hasClass("border-danger") || $("#fecha_instalacion").hasClass("border-danger")) {
      $('#btnEditar').prop('disabled', true)
    } else {
      $('#btnEditar').prop('disabled', false)
    }
  } else if ($('#tipo_sistema').val() == '7') {
    if ($("#titulo").hasClass("border-danger") || $("#dominioFactura").hasClass("border-danger") || $("#dominioRestobar").hasClass("border-danger") || $("#cliente").hasClass("border-danger") || $("#dni").hasClass("border-danger") || $("#razonSocial").hasClass("border-danger") || $("#name_comercial").hasClass("border-danger") || $("#ruc").hasClass("border-danger") || $("#tipo_negocio").hasClass("border-danger") || $("#direc_fiscal").hasClass("border-danger") || $("#serie_compro").hasClass("border-danger") || $("#especificacion").hasClass("border-danger") || $("#observacion").hasClass("border-danger") || $("#usuario").hasClass("border-danger") || $("#clave_sol").hasClass("border-danger") || $("#fecha_instalacion").hasClass("border-danger")) {
      $('#btnEditar').prop('disabled', true)
    } else {
      $('#btnEditar').prop('disabled', false)
    }
  } else {
    $('#btnEditar').prop('disabled', true)
  }
}, 100);
/** -------------> FIN DE FUNCIONES <----------------- */
$(document).ready(function () {
  let dataTable = $("#dataTable").DataTable({
    ajax: {
      url: "../controllers/InstalacionController.php?method=instalacionesPendientes",
      method: "GET",
    },
    columns: [
      { data: "indice" },
      { data: "fecha_instalacion" },
      { data: "titulo" },
      { data: "nombre_comercial" },
      { data: "cliente" },
      {
        data: "cdt",
        render: function (data, type, row) {
          if (row.cdt != null) {
            return `<a class="btn-sm btn btn-success" href="InstalacionController.php?method=descargarCDT&cdt=${row.cdt}"><i class="fas fa-download"></i></a>`
          } else {
            return `<span class="badge bg-danger text-dark">NO HAY CDT</span>`
          }
        }
      },
      {
        data: "logo_1",
        render: function (data, type, row) {
          if (row.logo_1 != null && row.logo_1 != '') {
            return `<button type="button" class="logo1 btn btn-sm btn-success" data-bs-toggle="modal" data-bs-target="#verLogo"><i class="fas fa-image"></i></button>`
          } else {
            return `<i class="far fa-times-circle text-danger fw-bolder fs-5"></i>`
          }
        }
      },
      {
        data: "logo_2",
        render: function (data, type, row) {
          if (row.logo_2 != null && row.logo_2 != '') {
            return `<button type="button" class="logo2 btn btn-sm btn-success" data-bs-toggle="modal" data-bs-target="#verLogo2"><i class="fas fa-image"></i></button>`
          } else {
            return `<i class="far fa-times-circle text-danger fw-bolder fs-5"></i>`
          }
        }
      },
      {
        data: "estado",
        render: function (data, type, row) {
          if (row.estado == 'revisado') {
            return `<span class="badge bg-warning text-dark">PENDIENTE</span>`
          } else {
            return `<span class="badge bg-success">REALIZADO</span>`
          }
        }
      },
      {
        data: "fecha_realizado",
        render: function (data, type, row) {
          if (row.fecha_realizado != null) {
            return `<span class="badge bg-info">${row.fecha_realizado}</span>`
          } else {
            return `<span class="badge bg-info"></span>`
          }
        }
      },
      {
        data: "estado",
        render: function (data, type, row) {
          if (row.estado == 'revisado') {
            return `<button type="button" class="verInfo btn-sm btn btn-info" data-bs-toggle="modal" data-bs-target="#modalVerInfo"><i class="fas fa-eye"></i></button>
            <button type="button" class="culminar btn-sm btn btn-warning" data-bs-toggle="modal" data-bs-target="#modalCulminar"><i class="fas fa-check"></i></button>`
          } else {
            return `<button type="button" class="verInfo btn-sm btn btn-success" data-bs-toggle="modal" data-bs-target="#modalVerInfo"> <i class="fas fa-eye"></i></button>`
          }
        }
      },
    ],
    language: español,
  });
  // Modal editar con datos correspondientes
  $('#dataTable tbody').on("click", ".verInfo", function () {
    let data = dataTable.row($(this).parents()).data();
    $('#tipo_sistema').val(data.tipo_sistema)
    if ((data.dominio_pos).length != '0') {
      $('#dominioPos').text(data.dominio_pos)
    } else {
      $('#dominioPos').text('___________')
    }
    if ((data.dominio_factura).length != '0') {
      $('#dominioFactura').text(data.dominio_factura)
    } else {
      $('#dominioFactura').text('___________')
    }
    if ((data.dominio_rest_web).length != '0') {
      $('#dominioRestobar').text(data.dominio_rest_web)
    } else {
      $('#dominioRestobar').text('___________')
    }
    if ((data.celular).length != '0') {
      $('#celular').text(data.celular)
    } else {
      $('#celular').text('___________')
    }
    if ((data.telefono).length != '0') {
      $('#telefono').text(data.telefono)
    } else {
      $('#telefono').text('___________')
    }
    if ((data.correo).length != '0') {
      $('#correo').text(data.correo)
    } else {
      $('#correo').text('___________')
    }
    if ((data.direccion_fiscal).length != '0') {
      $('#direc_fiscal').text(data.direccion_fiscal)
    } else {
      $('#direc_fiscal').text('___________')
    }
    if ((data.serie_comprobante).length != '0') {
      $('#serie_compro').text(data.serie_comprobante)
    } else {
      $('#serie_compro').text('___________')
    }
    if ((data.especificacion).length != '0') {
      $('#especificacion').text(data.especificacion)
    } else {
      $('#especificacion').text('___________')
    }
    if ((data.observacion).length != '0') {
      $('#observacion').text(data.observacion)
    } else {
      $('#observacion').text('___________')
    }
    if ((data.persona_contacto).length != '0') {
      $('#persona_contacto').text(data.persona_contacto)
    } else {
      $('#persona_contacto').text('___________')
    }
    if ((data.celular_contacto).length != '0') {
      $('#cel_contacto').text(data.celular_contacto)
    } else {
      $('#cel_contacto').text('___________')
    }
    if ((data.equip_caja_prin).length != '0') {
      $('#equipo_principal').text(data.equip_caja_prin)
    } else {
      $('#equipo_principal').text('___________')
    }
    if ((data.equipo_cocina).length != '0') {
      $('#equipo_cocina').text(data.equipo_cocina)
    } else {
      $('#equipo_cocina').text('___________')
    }
    if ((data.equipo_bar).length != '0') {
      $('#equipo_bar').text(data.equipo_bar)
    } else {
      $('#equipo_bar').text('___________')
    }
    if ((data.total_impresoras).length != '0') {
      $('#total_impresoras').text(data.total_impresoras)
    } else {
      $('#total_impresoras').text('___________')
    }
    if ((data.usuario_sol).length != '0') {
      $('#usuario').text(data.usuario_sol)
    } else {
      $('#usuario').text('___________')
    }
    if ((data.clave_sol).length != '0') {
      $('#clave_sol').text(data.clave_sol)
    } else {
      $('#clave_sol').text('___________')
    }
    if ((data.clave_cdt).length != '0') {
      $('#clave_cdt').text(data.clave_cdt)
    } else {
      $('#clave_cdt').text('___________')
    }
    if ((data.usuario_sec).length != '0') {
      $('#usuario_sec').text(data.usuario_sec)
    } else {
      $('#usuario_sec').text('___________')
    }
    if ((data.clave_sec).length != '0') {
      $('#clave_sec').text(data.clave_sec)
    } else {
      $('#clave_sec').text('___________')
    }
    $('#cliente').text(data.cliente)
    $('#dni').text(data.dni)
    $('#razonSocial').text(data.razon_social)
    $('#name_comercial').text(data.nombre_comercial)
    $('#ruc').text(data.ruc)
    $('#tipo_negocio').text(data.tipo_negocio)
    $('#titulo').text(data.titulo)
  });
  $('#fecha_instalacion').change(function () {
    let date = new Date();
    let dia = date.getDate();
    let mes = date.getMonth();
    if (mes < 9) {
      mes = `0${mes}`
    }
    let año = date.getFullYear();
    let fecha = `${año}-${mes}-${dia}`;
    let fecha_date = Date.parse(fecha);
    if ($('#fecha_instalacion').val() != '') {
      $('#fecha_instalacion').removeClass('border border-danger')
      $('#fecha_instalacion').addClass('border border-success')
    } else {
      $('#fecha_instalacion').removeClass('border border-success')
      $('#fecha_instalacion').addClass('border border-danger')
    }

  })
  // Modal para ver los logos
  $('#dataTable tbody').on("click", ".logo1", function () {
    let data = dataTable.row($(this).parents()).data();
    $("#logo_img_1").attr("src", `../assets/image/logo_instalacion/${data.logo_1}`);
  })
  $('#dataTable tbody').on("click", ".logo2", function () {
    let data = dataTable.row($(this).parents()).data();
    $("#logo_img_2").attr("src", `../assets/image/logo_instalacion/${data.logo_2}`);
  })
  // Modal de finalizar instalacion con datos
  $('#dataTable tbody').on("click", ".culminar", function () {
    let data = dataTable.row($(this).parents()).data();
    $("#id_insta_final").val(data.id);
  })
  // Proceso de guardar
  $('#msj_final').keyup(function () {
    if (($('#msj_final').val()).length > 30) {
      $('#msj_final').removeClass('border border-danger')
      $('#msj_final').addClass('border border-success')
      $('#btnGuardar').prop('disabled', false);
    } else {
      $('#msj_final').removeClass('border border-success')
      $('#msj_final').addClass('border border-danger')
      $('#btnGuardar').prop('disabled', true);
    }
  })
  $('#btnGuardar').click(function () {
    let formData = new FormData();
    formData.append("id_insta", $('#id_insta_final').val());
    formData.append("msj_final", $('#msj_final').val());
    window.$.ajax({
      type: "post",
      url: "InstalacionController.php?method=culminar",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      beforeSend: function () {
        Swal.fire({
          // allowOutsideClick: false,
          title: 'Cargando',
          timerProgressBar: true,
          didOpen: () => {
            Swal.showLoading()
            const b = Swal.getHtmlContainer().querySelector('b')
            timerInterval = setInterval(() => {
            }, 300)
          }
        })
      },
      success: function (response) {
        dataTable.ajax.reload();
        Swal.close()
        let data = JSON.parse(response);
        if (data.estado == "ok") {
          $('#msj_final').val('');
          $('#msj_final').removeClass('border border-success');
          $('#msj_final').addClass('border border-danger');
          $('#btnGuardar').prop('disabled', true);
          $("#modalCulminar").modal("hide");
          Swal.fire({
            text: data.mensaje,
            icon: 'success',
          })
        } else {
          Swal.fire({
            text: data.mensaje,
            icon: 'error',
          })
          setTimeout(() => {
            Swal.close()
          }, 1500);
        }
      },
    });
  })
  $('#btnCerrar').click(function () {
    $('#msj_final').val('');
    $('#msj_final').removeClass('border border-success');
    $('#msj_final').addClass('border border-danger');
    $('#btnGuardar').prop('disabled', true);
  })
  $('.btn-close').click(function () {
    $('#msj_final').val('');
    $('#msj_final').removeClass('border border-success');
    $('#msj_final').addClass('border border-danger');
    $('#btnGuardar').prop('disabled', true);
  })
  // Proceso de descargar
  $('#dataTable tbody').on("click", ".descargarCDT", function () {
    let data = dataTable.row($(this).parents()).data();
    let formData = new FormData();
    formData.append("cdt", data.cdt);
    window.$.ajax({
      type: "post",
      url: "InstalacionController.php?method=descargarCDT",
      data: formData,
      cache: false,
      processData: false,
      contentType: false,
      beforeSend: function () {
        Swal.fire({
          // allowOutsideClick: false,
          title: 'Cargando',
          timerProgressBar: true,
          didOpen: () => {
            Swal.showLoading()
            const b = Swal.getHtmlContainer().querySelector('b')
            timerInterval = setInterval(() => {
            }, 300)
          }
        })
      },
      success: function (response) {
        Swal.close()
        let data = JSON.parse(response);
        if (data.estado == "ok") {
          Swal.fire({
            text: data.mensaje,
            icon: 'success',
          })
        } else {
          Swal.fire({
            text: data.mensaje,
            icon: 'error',
          })
          setTimeout(() => {
            Swal.close()
          }, 1500);
        }
      },
    });
  })
});


